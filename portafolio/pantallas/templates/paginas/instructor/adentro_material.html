{% extends "plantillains.html" %}

{% block contenido %}

<div class="container mt-5">
    <div class="card shadow-lg border-0 rounded-3">
        <div class="card-body p-4">

            <!-- TÍTULO -->
            <h3 class="fw-bold text-success mb-3">
                <i class="bi bi-journal-text"></i> {{ material.titulo }}
            </h3>

            <!-- DESCRIPCIÓN -->
            {% if material.descripcion %}
            <p class="text-muted mb-4">
                {{ material.descripcion }}
            </p>
            {% endif %}

<!-- ARCHIVO ADJUNTO -->
<h5 class="fw-semibold mb-3">
    <i class="bi bi-paperclip"></i> Archivo adjunto
</h5>

{% if material.archivo %}
<ul class="list-group">
    <li class="list-group-item d-flex justify-content-between align-items-center">

        <!-- IZQUIERDA: ICONO + NOMBRE -->
        <div class="d-flex align-items-center gap-2">
            <!-- ICONO DEL ARCHIVO -->
            <i class="bi bi-file-earmark-text fs-5 text-secondary"></i>

            <!-- NOMBRE DEL ARCHIVO -->
            <span class="text-truncate" style="max-width: 400px;">
                {# Muestra solo el nombre del archivo, no la ruta completa #}
                {{ material.archivo.name|cut:"material/" }}
            </span>
        </div>

        <!-- DERECHA: BOTÓN DESCARGAR -->
        <a href="{{ material.archivo.url }}" download
        class="btn btn-sm btn-outline-success">
            <i class="bi bi-download"></i> Descargar
        </a>

    </li>
</ul>
{% else %}
<p class="text-muted">Este material no tiene archivos adjuntos.</p>
{% endif %}

        </div>
    </div>
</div>

<!-- BOTONES FLOTANTES -->
<style>
    .fab-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        gap: 0.75rem;
        z-index: 999;
    }
    .btn-fab {
        border-radius: 50%;
        width: 55px;
        height: 55px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
</style>

<div class="fab-container">
    <form method="POST" action="{% url 'eliminar_material' material.id %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger btn-fab" title="Eliminar Material">
            <i class="bi bi-trash"></i>
        </button>
    </form>


    <!-- BOTÓN EDITAR -->
    <a href="{% url 'material_editar' material.id %}" class="btn btn-success btn-fab" title="Editar Material">
        <i class="bi bi-pencil-square"></i>
    </a>
</div>


{% endblock %}
