{% extends "plantillains.html" %}

{% block contenido %}

<div class="container mt-5">
    <div class="card shadow-lg border-0 rounded-3">
        <div class="card-body p-4">

            <!-- TÍTULO -->
            <h3 class="fw-bold text-success mb-3">
                <i class="bi bi-journal-text"></i> {{ material.titulo }}
            </h3>

            <!-- DESCRIPCIÓN -->
            {% if material.descripcion %}
            <p class="text-muted mb-4">
                {{ material.descripcion }}
            </p>
            {% endif %}

<!-- ARCHIVO ADJUNTO -->
<h5 class="fw-semibold mb-3">
    <i class="bi bi-paperclip"></i> Archivo adjunto
</h5>

{% if material.archivo %}
<ul class="list-group">
    <li class="list-group-item d-flex justify-content-between align-items-center">

        <!-- IZQUIERDA: BOTÓN ELIMINAR + ICONO + NOMBRE -->
        <div class="d-flex align-items-center gap-2">
                {% csrf_token %}


            <!-- ICONO DEL ARCHIVO -->
            <i class="bi bi-file-earmark"></i>

            <!-- NOMBRE DEL ARCHIVO -->
            <span class="text-truncate" style="max-width: 200px;">
                {{ material.archivo }}
            </span>
        </div>

        <!-- DERECHA: BOTÓN DESCARGAR -->
        <a href="/media/{{ material.archivo }}" download
        class="btn btn-sm btn-outline-success">
            <i class="bi bi-download"></i> Descargar
        </a>

    </li>
</ul>
{% else %}
<p class="text-muted">Este material no tiene archivos adjuntos.</p>
{% endif %}



{% if material.archivo %}
<ul class="list-group">
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
            {{ material.archivo }}
        </div>

        <a href="/media/{{ material.archivo }}" download
        class="btn btn-sm btn-outline-success">
            <i class="bi bi-download"></i> Descargar
        </a>
    </li>
</ul>
{% else %}
<p class="text-muted">Este material no tiene archivos adjuntos.</p>
{% endif %}


            {% if material.archivo %}
            <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <i class="bi bi-file-earmark"></i>
                        {{ material.archivo }}   <!-- muestra el nombre tal cual haya sido guardado -->

                    </div>

                    <a href="/media/{{ material.archivo }}" download
                    class="btn btn-sm btn-outline-success">
                        <i class="bi bi-download"></i> Descargar
                    </a>
                </li>
            </ul>
            {% else %}
            <p class="text-muted">Este material no tiene archivos adjuntos.</p>
            {% endif %}

        </div>
    </div>
</div>

<!-- BOTÓN EDITAR -->
<a href="{% url 'material_editar' material.id %}"
class="btn btn-success"
style="position: fixed; bottom: 20px; right: 20px; border-radius: 50%;
        width: 55px; height: 55px; display: flex; align-items: center;
        justify-content: center; font-size: 1.5rem; z-index: 999;">
    <i class="bi bi-pencil-square"></i>
</a>


{% endblock %}
