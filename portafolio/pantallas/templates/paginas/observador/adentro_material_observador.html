{% extends "plantillaobservador.html" %}

{% block contenido %} 

<div class="container mt-5 mb-5">
    <div class="card shadow-sm border-0 rounded-3" style="padding:1.5rem;">
        <div class="card-body">

            <!-- Título -->
            <h3 class="fw-bold text-success mb-3" style="font-size:1.75rem; line-height:1.2;">
                <i class="bi bi-journal-text"></i> {{ material.titulo }}
            </h3>

            <!-- Descripción -->
            {% if material.descripcion %}
            <p class="text-muted mb-4" style="font-size:1rem; line-height:1.5;">
                {{ material.descripcion }}
            </p>
            {% endif %}

            <!-- Archivos adjuntos -->
            <h5 class="fw-semibold mb-3" style="font-size:1.1rem;">
                <i class="bi bi-paperclip"></i> Archivos adjuntos
            </h5>

            {% if material.archivo %}
            <ul class="list-group mb-4" style="font-size:1rem;">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <i class="bi bi-file-earmark"></i>
                        {{ material.archivo.name|slice:"8:" }}
                    </div>
                    <a href="{{ material.archivo.url }}" download class="btn btn-sm btn-outline-success">
                        <i class="bi bi-download"></i> Descargar
                    </a>
                </li>
            </ul>
            {% else %}
            <p class="text-muted mb-4" style="font-size:1rem;">No hay archivo adjunto.</p>
            {% endif %}

        </div>
    </div>
</div>

<!-- Botones flotantes -->
<style>
    .btn-fixed {
        position: fixed;
        bottom: 20px;
        width: 55px;
        height: 55px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        z-index: 1000;
        transition: transform 0.3s ease;
    }

    .btn-fixed:hover {
        transform: scale(1.1);
    }

    .btn-edit {
        right: 20px;
        background-color: #198754 !important;
        color: #fff !important;
    }

    .btn-delete {
        right: 90px;
        background-color: #dc3545 !important;
        color: #fff !important;
    }
</style>

<a href="{% url 'material_editar_coordinador' material.id %}" class="btn btn-fixed btn-edit" title="Editar">
    <i class="bi bi-pencil-square"></i>
</a>

<button class="btn btn-fixed btn-delete" id="btnEliminar" title="Eliminar">
    <i class="bi bi-trash3"></i>
</button>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.getElementById('btnEliminar').addEventListener('click', function() {
    Swal.fire({
        title: 'Confirmar Eliminación',
        html: `¿Estás seguro de que quieres eliminar el material "<strong>{{ material.titulo }}</strong>" por completo?<br><br>
              Esta acción no se puede deshacer.`,
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#dc3545',
        cancelButtonColor: '#6c757d',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar'
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = "{% url 'material_eliminar_coordinador' material.id %}";
        }
    });
});
</script>

{% endblock %}
